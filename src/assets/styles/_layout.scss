@use "variables" as v;
@use "mixins" as m;

.container {
  width: 100%;
  max-width: v.$container-max;
  margin-inline: auto;
  padding-inline: v.$container-padding;
}

.section-head {
  margin-bottom: v.$spacing-40;
}

.section-head__top {
  display: flex;
  align-items: center;
  justify-content: space-between;
  border-top: 1px solid rgba(0, 0, 0, 0.25);
}

.section-head__label {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: v.$spacing-16;
  flex: 1;
  min-width: 0;
}

.section-head__eyebrow {
  margin: 5px auto 0 0;
  font-size: 0.875rem;
  font-weight: 600;
  letter-spacing: 0.05em;
  color: #2f6df6;
  white-space: nowrap;
}

/* 追加：右端の番号 */
.section-head__no {
  margin: 0;
  font-size: 0.875rem;
  letter-spacing: 0.1em;
  color: rgba(0, 0, 0, 0.6);
}

/* タイトル */
.section-head__title {
  margin-bottom: 0;
  margin-top: 10px;
  font-size: 3rem;
  font-weight: 700;
}

/* 追加：日本語の小見出し（画像の「・選ばれる理由」枠） */
.section-head__jp {
  margin: v.$spacing-8 0 0;
  font-size: 0.875rem;
  color: rgba(0, 0, 0, 0.6);
}

.grid {
  display: grid;
  gap: v.$spacing-24;
}

.row {
  display: flex;
  flex-wrap: wrap;
  gap: v.$spacing-24;
}

/* =========================================
  Header (overlay on hero)
========================================= */
.global-header {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  width: 100%;
  height: 65px;
  z-index: v.$z-header;
  /* iOS Safariでfixedが効くように */
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;

  background: transparent;
  transition: background-color 0.3s ease,
              backdrop-filter 0.3s ease,
              border-color 0.3s ease;

  /* 透明時は白文字 */
  .global-header__logo,
  .global-nav__link {
    color: #fff;
  }

  .global-nav__link {
    &::after {
      background: #fff;
    }
  }

  .container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 100%;
    min-width: 0; /* はみ出し防止 */
  }

  /* スクロール後 */
  &.is-scrolled {
    background: linear-gradient(
      to bottom,
      rgba(19, 102, 255, 0.9) 0%,
      rgba(19, 102, 255, 0.55) 45%,
      rgba(19, 102, 255, 0.2) 70%,
      rgba(19, 102, 255, 0.05) 100%
    );
    backdrop-filter: blur(1px) saturate(120%);
    -webkit-backdrop-filter: blur(1px) saturate(120%);

    /* ロゴ・ナビは通常文字色に */
    // .global-header__logo,
    // .global-nav__link {
    //   color: v.$color-text;
    // }

    /* ナビの下線 */
    .global-nav__link {
      &::after {
        background: #fff;
      }
    }
  }
}


.global-header__logo {
  text-decoration: none;
  width: 120px;
  flex-shrink: 0;
}

.global-nav {
  display: none;

  @include m.mq(md) {
    display: block;
  }
}

.global-nav__list {
  display: flex;
  align-items: center;
  gap: v.$spacing-32;
  list-style: none;
  margin: 0;
  padding: 0;
}

.global-nav__item {
  margin: 0;
}

.global-nav__link {
  position: relative;
  display: block;
  padding: v.$spacing-8 0;
  font-size: 0.875rem;
  text-decoration: none;
  color: v.$color-text;
  transition: color 0.3s;

  &::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 2px;
    background: v.$color-text;
    transition: width 0.3s ease;
  }

  &:hover {
    &::after {
      width: 100%;
    }
  }
}

/* =============== */
/* Mobile Toggle */
/* =============== */
.nav-toggle {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  width: 44px;
  height: 44px;
  border: 1px solid rgba(255, 255, 255, 0.35);
  border-radius: 999px;
  background: rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(6px) saturate(120%);
  -webkit-backdrop-filter: blur(6px) saturate(120%);
  cursor: pointer;
  transition: background 0.25s ease, border-color 0.25s ease, transform 0.2s ease;

  &:active {
    transform: scale(0.98);
  }

  @include m.mq(md) {
    display: none;
  }
}

.nav-toggle__lines {
  position: relative;
  width: 18px;
  height: 2px;
  background: #fff;
  border-radius: 2px;
  display: block;

  &::before,
  &::after {
    content: "";
    position: absolute;
    left: 0;
    width: 18px;
    height: 2px;
    background: #fff;
    border-radius: 2px;
    transition: transform 0.25s ease, top 0.25s ease, opacity 0.25s ease;
  }

  &::before { top: -6px; }
  &::after  { top: 6px; }
}

/* 開いてる時の× */
.global-header.is-menu-open .nav-toggle__lines {
  background: transparent;

  &::before {
    top: 0;
    transform: rotate(45deg);
  }
  &::after {
    top: 0;
    transform: rotate(-45deg);
  }
}

/* =============== */
/* Drawer（ヘッダーと統一したブルー基調） */
/* =============== */
.drawer {
  position: fixed;
  inset: 0;
  z-index: calc(v.$z-header + 1);
  isolation: isolate;
}

.drawer__backdrop {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  border: 0;
  background: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(2px);
  -webkit-backdrop-filter: blur(2px);
  cursor: pointer;
}

.drawer__panel {
  position: absolute;
  right: 0;
  top: 0;
  height: 100%;
  width: min(280px, 85vw);
  padding: 24px 20px;
  background: linear-gradient(
    to bottom,
    rgba(19, 102, 255, 0.98) 0%,
    rgba(10, 55, 140, 0.98) 50%,
    rgba(5, 30, 80, 0.98) 100%
  );
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  box-shadow: -8px 0 32px rgba(0, 0, 0, 0.3);
  border-left: 1px solid rgba(255, 255, 255, 0.15);
  overflow-y: auto;
}

.drawer__head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 28px;
}

.drawer__title {
  font-size: 0.7rem;
  font-weight: 600;
  letter-spacing: 0.2em;
  color: rgba(255, 255, 255, 0.9);
}

.drawer__close {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 44px;
  height: 44px;
  border: 1px solid rgba(255, 255, 255, 0.35);
  border-radius: 999px;
  background: rgba(0, 0, 0, 0.2);
  color: #fff;
  font-size: 20px;
  line-height: 1;
  cursor: pointer;
  transition: background 0.2s ease;

  &:hover {
    background: rgba(255, 255, 255, 0.15);
  }
}

.drawer__nav {
  display: flex;
  flex-direction: column;
  gap: 0;
}

.drawer__link {
  position: relative;
  display: block;
  padding: 14px 0;
  font-size: 1rem;
  font-weight: 500;
  letter-spacing: 0.05em;
  color: #fff;
  text-decoration: none;
  border-bottom: 1px solid rgba(255, 255, 255, 0.12);
  transition: color 0.2s ease, opacity 0.2s ease;

  &::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 2px;
    background: #fff;
    transition: width 0.3s ease;
  }

  &:last-child {
    border-bottom: none;
  }

  &:hover::after,
  &:active::after {
    width: 24px;
  }

  &:active {
    opacity: 0.85;
  }
}

/* PCではドロワー不要 */
@include m.mq(md) {
  .drawer { display: none; }
}

// aboutセクション以降の背景：円形・棒状の青色ぼかし（疑似要素）
.top-wrap {
  position: relative;
  background: #fff;
  overflow: hidden;

  // 円形のぼかし（複数箇所を radial-gradient で表現）
  &::before {
    content: "";
    position: absolute;
    inset: 0;
    z-index: 0;
    pointer-events: none;
    background:
      radial-gradient(ellipse  clamp(140px, 22vw, 320px) clamp(140px, 22vw, 320px) at 15% 12%, rgba(100, 180, 255, 0.5) 0%, transparent 62%),
      radial-gradient(ellipse  clamp(130px, 20vw, 260px) clamp(130px, 20vw, 260px) at 88% 18%, rgba(47, 136, 255, 0.48) 0%, transparent 55%),
      radial-gradient(ellipse  clamp(120px, 18vw, 240px) clamp(120px, 18vw, 240px) at 72% 25%, rgba(120, 200, 255, 0.4) 0%, transparent 58%),
      radial-gradient(ellipse  clamp(100px, 15vw, 200px) clamp(100px, 15vw, 200px) at 88% 55%, rgba(55, 130, 215, 0.38) 0%, transparent 55%),
      radial-gradient(ellipse  clamp(110px, 17vw, 230px) clamp(110px, 17vw, 230px) at 42% 78%, rgba(35, 115, 245, 0.42) 0%, transparent 52%),
      radial-gradient(ellipse  clamp(160px, 24vw, 280px) clamp(160px, 24vw, 280px) at 35% 68%, rgba(110, 190, 255, 0.38) 0%, transparent 62%),
      radial-gradient(ellipse  clamp(110px, 16vw, 220px) clamp(110px, 16vw, 220px) at 5% 82%, rgba(95, 175, 255, 0.32) 0%, transparent 56%),
      radial-gradient(ellipse  clamp(120px, 18vw, 240px) clamp(120px, 18vw, 240px) at 55% 42%, rgba(100, 185, 255, 0.28) 0%, transparent 58%),
      radial-gradient(ellipse  clamp(90px, 14vw, 180px) clamp(90px, 14vw, 180px) at 25% 38%, rgba(45, 115, 200, 0.32) 0%, transparent 52%),
      radial-gradient(ellipse  clamp(85px, 13vw, 170px) clamp(85px, 13vw, 170px) at 82% 75%, rgba(50, 120, 205, 0.28) 0%, transparent 50%);
    filter: blur( clamp(32px, 5vw, 56px) );
    -webkit-filter: blur( clamp(32px, 5vw, 56px) );
  }

  // 棒状のぼかし（細長いグラデーションをランダムな位置に）
  &::after {
    content: "";
    position: absolute;
    inset: 0;
    z-index: 0;
    pointer-events: none;
    background:
      linear-gradient(105deg, transparent 32%, rgba(100, 180, 255, 0.32) 40%, rgba(55, 125, 210, 0.26) 50%, transparent 62%),

      linear-gradient(78deg, transparent 52%, rgba(23, 119, 245, 0.38) 80%, transparent 90%),
      linear-gradient(-8deg, transparent 18%, rgba(95, 175, 255, 0.3) 26%, rgba(50, 115, 200, 0.22) 34%, transparent 42%),
      linear-gradient(165deg, transparent 60%, rgba(35, 115, 245, 0.32) 66%, transparent 76%),
      linear-gradient(45deg, transparent 48%, rgba(45, 110, 195, 0.28) 54%, transparent 62%);
    background-size:
      48% 40%,
      58% 28%,
      44% 34%,
      38% 44%,
      52% 32%,
      42% 26%;
    background-position:
      5% 12%,
      68% 52%,
      78% 22%,
      18% 68%,
      48% 78%,
      62% 38%;
    background-repeat: no-repeat;
    filter: blur( clamp(40px, 6vw, 72px) );
    -webkit-filter: blur( clamp(40px, 6vw, 72px) );
  }
}

/* 中身を前に */
.top-wrap > * {
  position: relative;
  z-index: 1;
}
